javascript:(function()%7Blet%20appendedCanvases%20%3D%20%5B%5D%3B%20%0Alet%20rotationDirection%20%3D%20'clockwise'%3B%20%0Alet%20loadedPreset%20%3D%20null%3B%0A%0Afunction%20doImages(selectionParam%20%3D%20null)%20%7B%0A%0A%20%20%20%20let%20saveToPreset%20%3D%20!selectionParam%3B%0A%20%20%20%20let%20sel%3B%0A%0A%20%20%20%20if%20(!selectionParam)%20%7B%0A%0A%20%20%20%20%20%20%20%20sel%20%3D%20selection%3B%0A%20%20%20%20%20%20%20%20sel.rotate%20%3D%20rotationDirection%3B%0A%20%20%20%20%7D%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20const%20buildSelectionSide%20%3D%20(%7BpageNumber%2C%20yOffsetPercent%7D)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20wrapDiv%20%3D%20document.getElementById(%60page%24%7BpageNumber%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20image%20%3D%20wrapDiv.querySelector('img')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20y%20%3D%20image.naturalHeight%20*%20yOffsetPercent%3B%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%20image%2C%20pageNumber%2C%20y%2C%20wrapDiv%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20sel%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20rotate%3A%20selectionParam.rotation%20%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20upper%3A%20buildSelectionSide(selectionParam.upper)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20lower%3A%20buildSelectionSide(selectionParam.lower)%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(!sel.upper.image.complete%20%7C%7C%20!sel.lower.image.complete)%20%7B%0A%20%20%20%20%20%20%20%20console.error(%22One%20or%20both%20images%20are%20not%20fully%20loaded.%22)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20fullWidth%20%3D%20window.outerWidth%3B%0A%20%20%20%20const%20canvas%20%3D%20document.createElement('canvas')%3B%0A%20%20%20%20const%20ctx%20%3D%20canvas.getContext('2d')%3B%0A%0A%20%20%20%20const%20upperPageNum%20%3D%20%20sel.upper.pageNumber%3B%0A%20%20%20%20const%20lowerPageNum%20%3D%20%20sel.lower.pageNumber%3B%0A%20%20%20%20const%20upperImage%20%20%20%3D%20%20sel.upper.image%3B%0A%20%20%20%20const%20lowerImage%20%20%20%3D%20%20sel.lower.image%3B%0A%0A%20%20%20%20let%20totalWidth%20%20%3D%200%3B%0A%20%20%20%20let%20totalHeight%20%3D%200%3B%0A%20%20%20%20let%20scaleFactor%20%3D%201%3B%0A%0A%20%20%20%20if%20(lowerPageNum%20%3C%20upperPageNum%20%7C%7C%20(lowerPageNum%20%3D%3D%3D%20upperPageNum%20%26%26%20sel.lower.y%20%3C%20sel.upper.y))%20%7B%0A%20%20%20%20%20%20%20%20const%20temp%20%3D%20sel.upper%3B%0A%20%20%20%20%20%20%20%20sel.upper%20%3D%20sel.lower%3B%0A%20%20%20%20%20%20%20%20sel.lower%20%3D%20temp%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(upperPageNum%20%3D%3D%3D%20lowerPageNum)%20%7B%0A%0A%20%20%20%20%20%20%20%20const%20img%20%3D%20sel.upper.image%3B%0A%20%20%20%20%20%20%20%20imageWidth%20%3D%20img.width%3B%0A%20%20%20%20%20%20%20%20imageHeight%20%3D%20sel.lower.y%20-%20sel.upper.y%20%0A%0A%20%20%20%20%20%20%20%20totalWidth%20%3D%20imageWidth%3B%0A%20%20%20%20%20%20%20%20totalHeight%20%3D%20imageHeight%3B%0A%0A%20%20%20%20%20%20%20%20if%20(totalHeight%20%3E%20fullWidth)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20scaleFactor%20%3D%20fullWidth%20%2F%20totalHeight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20totalHeight%20%3D%20totalHeight%20*%20scaleFactor%3B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20totalWidth%20%3D%20%20totalWidth%20%20*%20scaleFactor%3B%0A%20%20%20%20%20%20%20%20%7D%20%0A%0A%20%20%20%20%20%20%20%20canvas.width%20%3D%20totalWidth%3B%0A%20%20%20%20%20%20%20%20canvas.height%20%3D%20totalHeight%3B%0A%0A%20%20%20%20%20%20%20%20ctx.drawImage(img%2C%200%2C%20sel.upper.y%2C%20imageWidth%2C%20imageHeight%2C%200%2C%200%2C%20imageWidth%20*%20scaleFactor%20%2C%20imageHeight%20*%20scaleFactor)%3B%0A%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20totalWidth%20%3D%20Math.max(upperImage.width%2C%20lowerImage.width)%3B%0A%0A%20%20%20%20%20%20%20%20const%20s_height%20%3D%20upperImage.height%20-%20sel.upper.y%3B%0A%20%20%20%20%20%20%20%20totalHeight%20%3D%20s_height%20%0A%0A%20%20%20%20%20%20%20%20if%20(lowerPageNum%20%3E%20upperPageNum%20%2B%201)%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20upperPageNum%20%2B%201%3B%20i%20%3C%20lowerPageNum%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20imgDiv%20%3D%20document.getElementById(%60page%24%7Bi%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20imgElement%20%3D%20imgDiv.querySelector('img')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20totalHeight%20%2B%3D%20imgElement.height%3B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20const%20lower_s_height%20%3D%20sel.lower.y%3B%0A%20%20%20%20%20%20%20%20totalHeight%20%2B%3D%20lower_s_height%0A%0A%20%20%20%20%20%20%20%20scaleFactor%20%3D%201%0A%0A%20%20%20%20%20%20%20%20if%20(totalHeight%20%3E%20fullWidth)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20scaleFactor%20%3D%20fullWidth%20%2F%20totalHeight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20totalHeight%20%3D%20totalHeight%20*%20scaleFactor%3B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20totalWidth%20%3D%20%20totalWidth%20%20*%20scaleFactor%3B%0A%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%0A%0A%20%20%20%20%20%20%20%20canvas.width%20%3D%20totalWidth%3B%0A%20%20%20%20%20%20%20%20canvas.height%20%3D%20totalHeight%3B%0A%0A%20%20%20%20%20%20%20%20ctx.drawImage(upperImage%2C%200%2C%20sel.upper.y%2C%20upperImage.width%2C%20s_height%2C%200%2C%200%2C%20upperImage.width%20*%20scaleFactor%2C%20s_height%20*%20scaleFactor)%3B%0A%0A%20%20%20%20%20%20%20%20let%20currentYPosition%20%3D%20s_height%20*%20scaleFactor%3B%20%0A%0A%20%20%20%20%20%20%20%20if%20(lowerPageNum%20%3E%20upperPageNum%20%2B%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20upperPageNum%20%2B%201%3B%20i%20%3C%20lowerPageNum%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20imgDiv%20%3D%20document.getElementById(%60page%24%7Bi%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20imgElement%20%3D%20imgDiv.querySelector('img')%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.drawImage(imgElement%2C%200%2C%200%2C%20imgElement.width%2C%20imgElement.height%2C%200%2C%20currentYPosition%2C%20imgElement.width%20*%20scaleFactor%2C%20imgElement.height%20*%20scaleFactor)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20currentYPosition%20%2B%3D%20imgElement.height%20*%20scaleFactor%3B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20ctx.drawImage(lowerImage%2C%200%2C%200%2C%20upperImage.width%2C%20lower_s_height%2C%200%2C%20currentYPosition%2C%20upperImage.width%20*%20scaleFactor%2C%20lower_s_height%20*%20scaleFactor)%3B%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20rotatedCanvas%20%3D%20createAndRotateCanvas(canvas%2C%20totalWidth%2C%20totalHeight%2C%20sel)%3B%0A%20%20%20%20document.body.appendChild(rotatedCanvas)%3B%0A%20%20%20%20appendedCanvases.push(rotatedCanvas)%3B%0A%0A%20%20%20%20if%20(saveToPreset)%20%7B%0A%0A%20%20%20%20%20%20%20%20const%20saveObj%20%3D%20%7B%0A%20%20%20%20%20%20%20%20upper%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageId%3A%20sel.upper.wrapDiv.id%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20pageNumber%3A%20sel.upper.pageNumber%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20yOffsetPercent%3A%20sel.upper.y%20%2F%20sel.upper.image.naturalHeight%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20lower%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageId%3A%20sel.lower.wrapDiv.id%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20pageNumber%3A%20sel.lower.pageNumber%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20yOffsetPercent%3A%20sel.lower.y%20%2F%20sel.lower.image.naturalHeight%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20rotation%3A%20sel.rotate%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!loadedPreset)%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20loadedPreset%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22preset1%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20url%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20manga_id%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20chapter_id%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20selections%3A%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20loadedPreset.selections.push(saveObj)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20selection%20%3D%20%7B%20upper%3A%20null%2C%20lower%3A%20null%20%7D%3B%20%0A%20%20%20%20console.log('Canvas%20rendered.')%3B%0A%7D%0A%0Afunction%20createAndRotateCanvas(sourceCanvas%2C%20totalWidth%2C%20totalHeight%2C%20sel)%20%7B%0A%20%20%20%20const%20rotatedCanvas%20%3D%20document.createElement('canvas')%3B%0A%20%20%20%20const%20rotatedCtx%20%3D%20rotatedCanvas.getContext('2d')%3B%0A%0A%20%20%20%20rotatedCanvas.width%20%3D%20totalHeight%3B%0A%20%20%20%20rotatedCanvas.height%20%3D%20totalWidth%3B%0A%0A%20%20%20%20rotatedCtx.translate(rotatedCanvas.width%20%2F%202%2C%20rotatedCanvas.height%20%2F%202)%3B%0A%0A%20%20%20%20if%20(sel.rotate%20%3D%3D%3D%20'clockwise')%20%7B%0A%20%20%20%20%20%20%20%20rotatedCtx.rotate(Math.PI%20%2F%202)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20rotatedCtx.rotate(-Math.PI%20%2F%202)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20rotatedCtx.drawImage(sourceCanvas%2C%20-sourceCanvas.width%20%2F%202%2C%20-sourceCanvas.height%20%2F%202)%3B%0A%0A%20%20%20%20rotatedCanvas.style.position%20%3D%20'absolute'%3B%0A%0A%20%20%20%20const%20fullWidth%20%3D%20window.outerWidth%3B%0A%20%20%20%20const%20centerX%20%3D%20(fullWidth%20-%20rotatedCanvas.width)%20%2F%202%3B%0A%20%20%20%20rotatedCanvas.style.left%20%3D%20%60%24%7BcenterX%7Dpx%60%3B%0A%0A%20%20%20%20let%20positionOffset%20%3D%20sel.lower.y%3B%0A%20%20%20%20rotatedCanvas.style.top%20%3D%20%60%24%7Bsel.lower.wrapDiv.offsetTop%20%2B%20positionOffset%20-%20rotatedCanvas.height%20%2F%202%7Dpx%60%3B%0A%0A%20%20%20%20rotatedCanvas.style.zIndex%20%3D%20'100'%3B%0A%20%20%20%20rotatedCanvas.style.marginTop%20%3D%20'20px'%3B%0A%20%20%20%20rotatedCanvas.style.border%20%3D%20'1px%20solid%20%23000'%3B%0A%20%20%20%20rotatedCanvas.style.overflowX%20%3D%20'scroll'%3B%0A%20%20%20%20rotatedCanvas.style.whiteSpace%20%3D%20'nowrap'%3B%0A%0A%20%20%20%20return%20rotatedCanvas%3B%0A%7D%0A%0Aselection%20%3D%20%7B%0A%20%20%20%20%20%20%20%20upper%3A%20null%2C%0A%20%20%20%20%20%20%20%20lower%3A%20null%2C%0A%20%20%20%20%7D%3B%0A%0Afunction%20start()%20%7B%0A%0A%20%20%20%20function%20selectRegion(event)%20%7B%0A%20%20%20%20%20%20%20%20const%20wrapDiv%20%3D%20event.target.closest('.wrap_img')%3B%20%0A%20%20%20%20%20%20%20%20const%20img%20%3D%20wrapDiv.querySelector('img')%3B%20%0A%20%20%20%20%20%20%20%20const%20rect%20%3D%20img.getBoundingClientRect()%3B%0A%20%20%20%20%20%20%20%20const%20imgId%20%3D%20wrapDiv.id%3B%20%0A%20%20%20%20%20%20%20%20const%20imageHeight%20%3D%20img.naturalHeight%3B%0A%0A%20%20%20%20%20%20%20%20const%20imgNumber%20%3D%20%20%20%20parseInt(imgId.replace(%22page%22%2C%20%22%22))%3B%0A%0A%20%20%20%20%20%20%20%20const%20yOffset%20%3D%20event.clientY%20-%20rect.top%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!selection.upper)%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20selection.upper%20%3D%20%7B%20image%3Aimg%2C%20pageNumber%3A%20imgNumber%2C%20y%3A%20yOffset%2C%20height%3A%20imageHeight%20%2C%20wrapDiv%20%3A%20wrapDiv%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%7D%20else%0A%20%20%20%20%20%20%20%20if%20(!selection.lower)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20selection.lower%20%3D%20%7B%20image%3Aimg%2C%20pageNumber%3A%20imgNumber%2C%20y%3A%20yOffset%2C%20height%3A%20imageHeight%20%2C%20wrapDiv%20%3A%20wrapDiv%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20doImages()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20initSelection()%20%7B%0A%20%20%20%20%20%20%20%20const%20images%20%3D%20document.querySelectorAll('.wrap_img%20img')%3B%0A%0A%20%20%20%20%20%20%20%20images.forEach(img%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20img.removeEventListener('click'%2C%20selectRegion%20)%3B%20%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20images.forEach(img%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20img.addEventListener('click'%2C%20selectRegion%20)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20initSelection()%3B%0A%0A%20%20%20%20function%20undo()%20%7B%0A%20%20%20%20%20%20if%20(appendedCanvases.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20const%20lastCanvas%20%3D%20appendedCanvases.pop()%3B%20%20%0A%20%20%20%20%20%20%20%20document.body.removeChild(lastCanvas)%3B%20%20%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20toggleRotationDirection()%20%7B%0A%20%20%20%20%20%20%20%20rotationDirection%20%3D%20(rotationDirection%20%3D%3D%3D%20'clockwise')%20%3F%20'counterclockwise'%20%3A%20'clockwise'%3B%0A%20%20%20%20%20%20%20%20if%20(rotationDirection%20%3D%3D%3D%20'clockwise')%20%7B%0A%20%20%20%20%20%20%20%20rotateButton.textContent%20%3D%20'Rotation%20%E2%86%BB'%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20rotateButton.textContent%20%3D%20'Rotation%20%E2%86%BA'%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20clearAllCanvases()%20%7B%0A%20%20%20%20%20%20%20%20appendedCanvases.forEach(canvas%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(canvas.parentNode)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20canvas.parentNode.removeChild(canvas)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20appendedCanvases.length%20%3D%200%3B%0A%20%20%20%20%20%20%20%20loadedPreset%20%3D%20null%3B%20%20%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20buttonContainer%20%3D%20document.createElement('div')%3B%0A%20%20%20%20buttonContainer.style.position%20%3D%20'fixed'%3B%0A%20%20%20%20buttonContainer.style.left%20%3D%20'20px'%3B%0A%20%20%20%20buttonContainer.style.bottom%20%3D%20'20px'%3B%0A%20%20%20%20buttonContainer.style.zIndex%20%3D%20'9999'%3B%20%20%0A%20%20%20%20buttonContainer.style.display%20%3D%20'flex'%3B%0A%20%20%20%20buttonContainer.style.flexDirection%20%3D%20'column'%3B%0A%20%20%20%20buttonContainer.style.alignItems%20%3D%20'flex-start'%3B%20%20%0A%20%20%20%20buttonContainer.style.gap%20%3D%20'15px'%3B%20%20%0A%0A%20%20%20%20const%20githubButton%20%3D%20document.createElement('button')%3B%0A%20%20%20%20githubButton.textContent%20%3D%20'GitHub'%3B%0A%20%20%20%20githubButton.style.padding%20%3D%20'12px%2024px'%3B%0A%20%20%20%20githubButton.style.backgroundColor%20%3D%20'%2324292f'%3B%20%20%0A%20%20%20%20githubButton.style.color%20%3D%20'%23fff'%3B%0A%20%20%20%20githubButton.style.border%20%3D%20'none'%3B%0A%20%20%20%20githubButton.style.borderRadius%20%3D%20'8px'%3B%0A%20%20%20%20githubButton.style.fontSize%20%3D%20'16px'%3B%0A%20%20%20%20githubButton.style.fontWeight%20%3D%20'bold'%3B%0A%20%20%20%20githubButton.style.cursor%20%3D%20'pointer'%3B%0A%20%20%20%20githubButton.style.boxShadow%20%3D%20'0%204px%206px%20rgba(0%2C%200%2C%200%2C%200.1)'%3B%0A%20%20%20%20githubButton.onclick%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20window.open('https%3A%2F%2Fgithub.com%2FHorizontalEnjoyer%2FHorizontalReading'%2C%20'_blank')%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20const%20discordButton%20%3D%20document.createElement('button')%3B%0A%20%20%20%20discordButton.textContent%20%3D%20'Discord'%3B%0A%20%20%20%20discordButton.style.padding%20%3D%20'12px%2024px'%3B%0A%20%20%20%20discordButton.style.backgroundColor%20%3D%20'%237289da'%3B%20%20%0A%20%20%20%20discordButton.style.color%20%3D%20'%23fff'%3B%0A%20%20%20%20discordButton.style.border%20%3D%20'none'%3B%0A%20%20%20%20discordButton.style.borderRadius%20%3D%20'8px'%3B%0A%20%20%20%20discordButton.style.fontSize%20%3D%20'16px'%3B%0A%20%20%20%20discordButton.style.fontWeight%20%3D%20'bold'%3B%0A%20%20%20%20discordButton.style.cursor%20%3D%20'pointer'%3B%0A%20%20%20%20discordButton.style.boxShadow%20%3D%20'0%204px%206px%20rgba(0%2C%200%2C%200%2C%200.1)'%3B%0A%20%20%20%20discordButton.onclick%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20window.open('https%3A%2F%2Fdiscord.gg%2FFdN9NsSZ'%2C%20'_blank')%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20const%20undoButton%20%3D%20document.createElement('button')%3B%0A%20%20%20%20undoButton.textContent%20%3D%20'Undo%20%E2%86%A9'%3B%0A%20%20%20%20undoButton.style.padding%20%3D%20'12px%2024px'%3B%0A%20%20%20%20undoButton.style.backgroundColor%20%3D%20'%23007bff'%3B%20%20%0A%20%20%20%20undoButton.style.color%20%3D%20'%23fff'%3B%0A%20%20%20%20undoButton.style.border%20%3D%20'none'%3B%0A%20%20%20%20undoButton.style.borderRadius%20%3D%20'8px'%3B%0A%20%20%20%20undoButton.style.fontSize%20%3D%20'16px'%3B%0A%20%20%20%20undoButton.style.fontWeight%20%3D%20'bold'%3B%0A%20%20%20%20undoButton.style.cursor%20%3D%20'pointer'%3B%0A%20%20%20%20undoButton.style.boxShadow%20%3D%20'0%204px%206px%20rgba(0%2C%200%2C%200%2C%200.1)'%3B%0A%20%20%20%20undoButton.onclick%20%3D%20undo%3B%0A%0A%20%20%20%20const%20rotateButton%20%3D%20document.createElement('button')%3B%0A%20%20%20%20rotateButton.textContent%20%3D%20'Rotation%20%E2%86%BB'%3B%0A%20%20%20%20rotateButton.style.padding%20%3D%20'12px%2024px'%3B%0A%20%20%20%20rotateButton.style.backgroundColor%20%3D%20'%2328a745'%3B%20%0A%20%20%20%20rotateButton.style.color%20%3D%20'%23fff'%3B%0A%20%20%20%20rotateButton.style.border%20%3D%20'none'%3B%0A%20%20%20%20rotateButton.style.borderRadius%20%3D%20'8px'%3B%0A%20%20%20%20rotateButton.style.fontSize%20%3D%20'16px'%3B%0A%20%20%20%20rotateButton.style.fontWeight%20%3D%20'bold'%3B%0A%20%20%20%20rotateButton.style.cursor%20%3D%20'pointer'%3B%0A%20%20%20%20rotateButton.style.boxShadow%20%3D%20'0%204px%206px%20rgba(0%2C%200%2C%200%2C%200.1)'%3B%0A%20%20%20%20rotateButton.onclick%20%3D%20toggleRotationDirection%3B%0A%0A%20%20%20%20const%20presetLoadButton%20%3D%20document.createElement('button')%3B%0A%20%20%20%20presetLoadButton.textContent%20%3D%20'Load%20Preset'%3B%0A%20%20%20%20presetLoadButton.style.padding%20%3D%20'12px%2024px'%3B%0A%20%20%20%20presetLoadButton.style.backgroundColor%20%3D%20'%236f42c1'%3B%0A%20%20%20%20presetLoadButton.style.color%20%3D%20'%23fff'%3B%0A%20%20%20%20presetLoadButton.style.border%20%3D%20'none'%3B%0A%20%20%20%20presetLoadButton.style.borderRadius%20%3D%20'8px'%3B%0A%20%20%20%20presetLoadButton.style.fontSize%20%3D%20'16px'%3B%0A%20%20%20%20presetLoadButton.style.fontWeight%20%3D%20'bold'%3B%0A%20%20%20%20presetLoadButton.style.cursor%20%3D%20'pointer'%3B%0A%20%20%20%20presetLoadButton.style.boxShadow%20%3D%20'0%204px%206px%20rgba(0%2C%200%2C%200%2C%200.1)'%3B%0A%0A%20%20%20%20const%20savePresetButton%20%3D%20document.createElement('button')%3B%0A%20%20%20%20savePresetButton.textContent%20%3D%20'Save%20Preset'%3B%0A%20%20%20%20savePresetButton.style.padding%20%3D%20'12px%2024px'%3B%0A%20%20%20%20savePresetButton.style.backgroundColor%20%3D%20'%2317a2b8'%3B%20%0A%20%20%20%20savePresetButton.style.color%20%3D%20'%23fff'%3B%0A%20%20%20%20savePresetButton.style.border%20%3D%20'none'%3B%0A%20%20%20%20savePresetButton.style.borderRadius%20%3D%20'8px'%3B%0A%20%20%20%20savePresetButton.style.fontSize%20%3D%20'16px'%3B%0A%20%20%20%20savePresetButton.style.fontWeight%20%3D%20'bold'%3B%0A%20%20%20%20savePresetButton.style.cursor%20%3D%20'pointer'%3B%0A%20%20%20%20savePresetButton.style.boxShadow%20%3D%20'0%204px%206px%20rgba(0%2C%200%2C%200%2C%200.1)'%3B%0A%0A%20%20%20%20presetLoadButton.onclick%20%3D%20async%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20presetJSON%20%3D%20prompt(%22Paste%20preset%20JSON%20to%20load%20canvases%3A%22)%3B%0A%20%20%20%20%20%20%20%20if%20(!presetJSON)%20return%3B%0A%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20presetObj%20%3D%20JSON.parse(presetJSON)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!Array.isArray(presetObj.selections))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20alert(%22Invalid%20preset%20format%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(loadedPreset%20!%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20overwrite%20%3D%20confirm(%22A%20preset%20is%20already%20loaded.%20Do%20you%20want%20to%20overwrite%20it%3F%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!overwrite)%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clearAllCanvases()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(const%20sel%20of%20presetObj.selections)%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20await%20preloadImagesForRange(1%2C%20Math.max(sel.upper.pageNumber%2C%20sel.lower.pageNumber))%3B%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doImages(sel)%3B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20loadedPreset%20%3D%20presetObj%3B%0A%0A%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alert(%22Invalid%20JSON%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.error(e)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20preloadImagesForRange(startPage%2C%20endPage)%20%7B%0A%20%20%20%20%20%20%20%20const%20promises%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20startPage%3B%20i%20%3C%3D%20endPage%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20div%20%3D%20document.getElementById(%60page%24%7Bi%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(div)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20img%20%3D%20div.querySelector('img')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(img)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20promises.push(waitForImageLoad(img))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20Promise.all(promises)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20waitForImageLoad(img)%20%7B%0A%20%20%20%20return%20new%20Promise((resolve%2C%20reject)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(img.complete%20%26%26%20img.naturalWidth%20!%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20resolve()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20img.onerror%20%3D%20()%20%3D%3E%20reject(new%20Error(%60Image%20failed%20to%20load%3A%20%24%7Bimg.src%7D%60))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20savePresetButton.onclick%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20presetJSON%20%3D%20JSON.stringify(loadedPreset%2C%20null%2C%202)%3B%0A%0A%20%20%20%20%20%20%20%20navigator.clipboard.writeText(presetJSON).then(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alert('Preset%20saved%20and%20copied%20to%20clipboard!')%3B%0A%20%20%20%20%20%20%20%20%7D).catch(err%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.error(%22Copy%20failed%22%2C%20err)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20alert(%22Failed%20to%20copy%20preset%20to%20clipboard.%22)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20buttonContainer.appendChild(githubButton)%3B%0A%20%20%20%20buttonContainer.appendChild(discordButton)%3B%0A%20%20%20%20buttonContainer.appendChild(undoButton)%3B%0A%20%20%20%20buttonContainer.appendChild(rotateButton)%3B%0A%20%20%20%20buttonContainer.appendChild(presetLoadButton)%3B%0A%20%20%20%20buttonContainer.insertBefore(savePresetButton%2C%20presetLoadButton)%3B%0A%0A%20%20%20%20document.body.appendChild(buttonContainer)%3B%0A%0A%7D%0A%0Astart()%7D)()%3B
